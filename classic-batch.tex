% convert -density 600 -delay 10 -loop 0 classic-batch.pdf classic-batch-pdf.gif
%   or
% convert -density 600 classic-batch.pdf classic-batch-%02d.png
% convert -delay 100 -loop 0 classic-batch*.png classic-batch.gif

\input{diagrams}

\def \FastRender{0}
\def \ShowWatermarks{0}

\newcommand{\BatchDiagram}[3][c_timeline] {
\TriggersDiagram[#1]{#2}{
	\DrawBatchBoundary{5}
	#3
} 
}

\newcommand{\FrameOutput}[0]{
\BatchDiagram[c_back]{5.222}{
	\DrawOutput{0}{\maxx}{0}{5.000}{51}
}
}
\DrawInitialFrame{\FrameOutput}

\newcommand{\FrameA}[1] {
\BatchDiagram{#1}{
}
}

\FrameA{.01}
\if \FastRender 0
\FrameA{.111}
\FrameA{.222}
\fi

% +5
\newcommand{\FrameState}[2] {
\BatchDiagram{#1}{
	\DrawState{0}{\maxx}{0}{#1}{#2}
}
}
\if \FastRender 0
\FrameState{.333}{5}
\FrameState{.444}{5}
\FrameState{.555}{5}
\FrameState{0.666}{12}
\FrameState{0.777}{12}
\FrameState{0.888}{12}
\FrameState{0.999}{12}
\FrameState{1.000}{12}
\FrameState{1.111}{12}
\FrameState{1.222}{15}
\FrameState{1.333}{15}
\FrameState{1.444}{19}
\FrameState{1.555}{19}
\FrameState{1.666}{22}
\FrameState{1.777}{22}
\FrameState{1.888}{22}
\FrameState{2.000}{22}
\FrameState{2.111}{30}
\FrameState{2.222}{30}
\FrameState{2.333}{33}
\FrameState{2.444}{33}
\fi % \FastRender
\FrameState{2.555}{33}
\if \FastRender 0
\FrameState{2.666}{33}
\FrameState{2.777}{33}
\FrameState{2.888}{33}
\FrameState{3.000}{33}
\FrameState{3.111}{33}
\FrameState{3.222}{33}
\FrameState{3.333}{42}
\FrameState{3.444}{42}
\FrameState{3.555}{42}
\FrameState{3.666}{50}
\FrameState{3.777}{50}
\FrameState{3.888}{50}
\FrameState{4.000}{51}
\FrameState{4.111}{51}
\FrameState{4.222}{51}
\FrameState{4.333}{51}
\FrameState{4.444}{51}
\FrameState{4.555}{51}
\FrameState{4.666}{51}
\FrameState{4.777}{51}
\FrameState{4.888}{51}

\BatchDiagram{5.000}{
	\DrawOutput{0}{\maxx}{0}{5.000}{51}
}
\fi % FastRender 0

\DrawFinalFrames{\FrameOutput}

\end{document}
