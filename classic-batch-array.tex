% convert -density 600 -delay 10 -loop 0 classic-batch.pdf classic-batch-pdf.gif
%   or
% convert -density 600 classic-batch.pdf classic-batch-%02d.png
% convert -delay 100 -loop 0 classic-batch*.png classic-batch.gif

\input{diagrams}

\def \ShowWatermarks{0}

\newcommand{\BatchDiagram}[3][c_timeline] {
\TriggersDiagram[#1]{#2}{
	\DrawBatchBoundary{5}
	#3
} 
}

\newcommand{\FrameA}[1] {
\BatchDiagram{#1}{
}
}

\FrameA{.01}
\FrameA{.111}
\FrameA{.222}

% +5
\newcommand{\FrameState}[2] {
\BatchDiagram{#1}{
	\DrawState{0}{\maxx}{0}{#1}{[#2]}
}
}
\FrameState{.333}{5}
\FrameState{.444}{5}
\FrameState{.555}{5}
\FrameState{0.666}{5, 7}
\FrameState{0.777}{5, 7}
\FrameState{0.888}{5, 7}
\FrameState{0.999}{5, 7}
\FrameState{1.000}{5, 7}
\FrameState{1.111}{5, 7}
\FrameState{1.222}{5, 7, 3}
\FrameState{1.333}{5, 7, 3}
\FrameState{1.444}{5, 7, 3, 4}
\FrameState{1.555}{5, 7, 3, 4}
\FrameState{1.666}{5, 7, 3, 4, 3}
\FrameState{1.777}{5, 7, 3, 4, 3}
\FrameState{1.888}{5, 7, 3, 4, 3}
\FrameState{2.000}{5, 7, 3, 4, 3}
\FrameState{2.111}{5, 7, 8, 3, 4, 3}
\FrameState{2.222}{5, 7, 8, 3, 4, 3}
\FrameState{2.333}{5, 7, 8, 3, 4, 3, 3}
\FrameState{2.444}{5, 7, 8, 3, 4, 3, 3}
\FrameState{2.555}{5, 7, 8, 3, 4, 3, 3}
\FrameState{2.666}{5, 7, 8, 3, 4, 3, 3}
\FrameState{2.777}{5, 7, 8, 3, 4, 3, 3}
\FrameState{2.888}{5, 7, 8, 3, 4, 3, 3}
\FrameState{3.000}{5, 7, 8, 3, 4, 3, 3}
\FrameState{3.111}{5, 7, 8, 3, 4, 3, 3}
\FrameState{3.222}{5, 7, 8, 3, 4, 3, 3}
\FrameState{3.333}{5, 9, 7, 8, 3, 4, 3, 3}
\FrameState{3.444}{5, 9, 7, 8, 3, 4, 3, 3}
\FrameState{3.555}{5, 9, 7, 8, 3, 4, 3, 3}
\FrameState{3.666}{5, 9, 7, 8, 3, 4, 3, 3, 8}
\FrameState{3.777}{5, 9, 7, 8, 3, 4, 3, 3, 8}
\FrameState{3.888}{5, 9, 7, 8, 3, 4, 3, 3, 8}
\FrameState{4.000}{5, 9, 7, 8, 3, 4, 3, 3, 8, 1}
\FrameState{4.111}{5, 9, 7, 8, 3, 4, 3, 3, 8, 1}
\FrameState{4.222}{5, 9, 7, 8, 3, 4, 3, 3, 8, 1}
\FrameState{4.333}{5, 9, 7, 8, 3, 4, 3, 3, 8, 1}
\FrameState{4.444}{5, 9, 7, 8, 3, 4, 3, 3, 8, 1}
\FrameState{4.555}{5, 9, 7, 8, 3, 4, 3, 3, 8, 1}
\FrameState{4.666}{5, 9, 7, 8, 3, 4, 3, 3, 8, 1}
\FrameState{4.777}{5, 9, 7, 8, 3, 4, 3, 3, 8, 1}
\FrameState{4.888}{5, 9, 7, 8, 3, 4, 3, 3, 8, 1}

\BatchDiagram{5.000}{
	\DrawOutput{0}{\maxx}{0}{5.000}{51}
}

\newcommand{\FrameOutput}[0]{
\BatchDiagram[c_back]{5.222}{
	\DrawOutput{0}{\maxx}{0}{5.000}{51}
}
}
\DrawFinalFrames{\FrameOutput}

\end{document}
